if (self.CavalryLogger) { CavalryLogger.start_js(["ZyV+End"]); }

__d("ProfileCometFeaturedHighlightsEditCollectionDialogQuery.graphql",["relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"collectionID"},{defaultValue:null,kind:"LocalArgument",name:"scale"}],b=[{kind:"Variable",name:"id",variableName:"collectionID"}],c={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},e={alias:null,args:[{kind:"Literal",name:"height",value:500},{kind:"Variable",name:"scale",variableName:"scale"},{kind:"Literal",name:"width",value:500}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null},f=[d];e={alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"media",plural:!1,selections:[c,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"accessibility_caption",storageKey:null},e],type:"Photo",abstractKey:null},{kind:"InlineFragment",selections:[e],type:"Video",abstractKey:null},{kind:"InlineFragment",selections:f,type:"Node",abstractKey:"__isNode"},{kind:"InlineFragment",selections:f,type:"GenericAttachmentMedia",abstractKey:null},{kind:"InlineFragment",selections:f,type:"MontageImage",abstractKey:null},{kind:"InlineFragment",selections:f,type:"MontageVideo",abstractKey:null}],storageKey:null}],storageKey:null};f=[d,e];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"ProfileCometFeaturedHighlightsEditCollectionDialogQuery",selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"ProfileCometFeaturedHighlightsEditCollectionDialog_viewer"}],storageKey:null},action:"THROW",path:"viewer"},{kind:"RequiredField",field:{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"ProfileCometFeaturedHighlightsEditCollectionStep_collection"}],type:"StoryHighlightContainer",abstractKey:null}],storageKey:null},action:"THROW",path:"node"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"ProfileCometFeaturedHighlightsEditCollectionDialogQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"globe_focus",storageKey:null}],storageKey:null},{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[c,d,{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"StoryHighlightContainerToBackingCardsConnection",kind:"LinkedField",name:"backing_cards",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryHighlightContainerToBackingCardsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"node",plural:!1,selections:[d,{alias:null,args:null,kind:"ScalarField",name:"creation_time",storageKey:null},e],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"backing_cover_card",plural:!1,selections:f,storageKey:null},{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"cover_card",plural:!1,selections:f,storageKey:null}],type:"StoryHighlightContainer",abstractKey:null}],storageKey:null}]},params:{id:"3782258291893775",metadata:{},name:"ProfileCometFeaturedHighlightsEditCollectionDialogQuery",operationKind:"query",text:null}}}();a.params.id!=null&&b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("ProfileCometFeaturedHighlightsEditCollectionDialog_viewer.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ProfileCometFeaturedHighlightsEditCollectionDialog_viewer",selections:[{args:null,kind:"FragmentSpread",name:"useCometFocusedGlobeFilled20_viewer"}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("ProfileCometFeaturedHighlightsEditCollectionDialog.react",["CometMultiStepDialog.react","CometRelay","ErrorBoundary.react","ProfileCometFeaturedHighlightsEditCollectionDialogQuery.graphql","ProfileCometFeaturedHighlightsEditCollectionDialog_viewer.graphql","ProfileCometFeaturedHighlightsEditCollectionStep.react","ProfileCometFeaturedHighlightsEditDialogContext","ProfileCometFeaturedHighlightsEditDialogReducer","ProfileCometFeaturedHighlightsStrings","react","useCometAlertDialog","useCometFocusedGlobeFilled20"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=d("react");e=d("react");var k=e.useMemo,l=e.useReducer;function m(a){var e=a.collectionRef,f=a.onClose,g=a.profileID;a=a.viewerRef;a=d("CometRelay").useFragment(h!==void 0?h:h=b("ProfileCometFeaturedHighlightsEditCollectionDialog_viewer.graphql"),a);a=c("useCometFocusedGlobeFilled20")(a);a=l(d("ProfileCometFeaturedHighlightsEditDialogReducer").reducer,d("ProfileCometFeaturedHighlightsEditDialogReducer").getInitialState(a,g));var i=a[0],m=a[1];g=k(function(){return{dispatch:m,state:i}},[i]);return j.jsx(c("ProfileCometFeaturedHighlightsEditDialogContext").Provider,{value:g,children:j.jsx(c("CometMultiStepDialog.react"),{onClose:f,size:"medium",title:d("ProfileCometFeaturedHighlightsStrings").EDIT_FEATURED_COLLECTION,withCloseButton:!0,children:function(a){return j.jsx(c("ProfileCometFeaturedHighlightsEditCollectionStep.react"),{collectionRef:e,onReturn:f,pushPage:a})}})})}m.displayName=m.name+" [from "+f.id+"]";function a(a){var e=a.props,f=e.onClose;e=e.profileID;a=a.queries.queryReference;a=d("CometRelay").usePreloadedQuery(i!==void 0?i:i=b("ProfileCometFeaturedHighlightsEditCollectionDialogQuery.graphql"),a);var g=a.node;a=a.viewer;var h=c("useCometAlertDialog")(),k=h[0];return j.jsx(c("ErrorBoundary.react"),{fallback:function(a,b){k({body:a.description,title:a.message})},children:j.jsx(m,{collectionRef:g,onClose:f,profileID:e,viewerRef:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("ProfileCometImagePreloader",["Promise","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return new(b("Promise"))(function(b){var c=new Image();c.onload=b;c.onerror=b;c.src=a})}function a(a,d){c("promiseDone")(b("Promise").all(a.map(function(a){return h(a)})),d)}g.preloadImages=a}),98);
__d("XCometGroupsCoverPhotoUploaderAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groups/cover/comet_upload/",{group_id:{type:"FBID",required:!0}})}),null);
__d("useProfileCometPhotoUploader",["AsyncUploadRequest","react","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useRef;function a(){var a=i([]);h(function(){return function(){a.current&&a.current.forEach(function(a){return a.abort()})}},[]);return function(b,d,e){b=new(c("AsyncUploadRequest"))(b).setAllowCrossOrigin(!0).setFiles({file:d}).setPreventDefaultErrorHandler(!0);var f=e.onFailed,g=e.onSucceeded;g&&b.subscribe("success",function(a,b){a=b.getResponse();if(a==null)throw c("unrecoverableViolation")("Photo upload result should contain a response.","profile_comet");g(a.getPayload())});f&&b.subscribe("failure",function(a,b){a=b.getResponse()||{};b=a.errorDescription;a=a.errorSummary;f({description:b!=null?b.toString():"",summary:a!=null?a.toString():""})});b.send();a.current.push(b)}}g["default"]=a}),98);
__d("GroupsCometCoverPhotoUploader.react",["ProfileCometCoverPhotoEditContext","ProfileCometImagePreloader","XCometGroupsCoverPhotoUploaderAsyncController","react","useCometAlertDialog","useProfileCometPhotoUploader"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useCallback,j=b.useContext,k=b.useEffect;function a(a){var b=j(c("ProfileCometCoverPhotoEditContext")),e=b.dispatch;b=b.state;var f=c("useCometAlertDialog")(),g=f[0],l=c("useProfileCometPhotoUploader")(),m=i(function(a){var b,c=(b=a.imageURI)!=null?b:"",f=(b=a.blurredURI)!=null?b:"";d("ProfileCometImagePreloader").preloadImages([c,f],function(){var b;return e({data:{blurredURI:f,height:(b=a.imageHeight)!=null?b:0,id:a.fbid,uri:c,width:(b=a.imageWidth)!=null?b:0},type:"UPLOAD_SUCCESS"})})},[e]),n=i(function(a){g({body:a.description,title:a.summary}),e({type:"UPLOAD_FAILED"})},[e,g]),o=b.file;k(function(){if(!o)return;var b=c("XCometGroupsCoverPhotoUploaderAsyncController").getURIBuilder().setFBID("group_id",a.groupID).getURI();l(b,o,{onFailed:n,onSucceeded:m})},[o,n,m,a.groupID,l]);return h.jsx("div",{})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);